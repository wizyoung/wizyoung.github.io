<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="baidu-site-verification" content="a4JJ12vArj" />
<title>æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘ popclip æ’ä»¶ - CaptainChen</title>
<link rel="shortcut icon" href="https://wizyoung.github.io/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://wizyoung.github.io/media/css/tailwind.css">
<link rel="stylesheet" href="/media/css/font-awesome.min.css">
<link rel="stylesheet" href="/media/css/align.css">
<link rel="stylesheet" href="https://wizyoung.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘ popclip æ’ä»¶ - CaptainChen - Atom Feed" href="https://wizyoung.github.io/atom.xml">

<script async type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script data-ad-client="ca-pub-6170107338287342" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5d74f9d2ab6f1000123c83b9&product=inline-share-buttons' async='async'></script>


  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90329290-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-90329290-1');
  </script>
    

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8221f2ad0615a0f5915999d46c59b7bc";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



  <meta name="description" content="
æ ¹æ® Google Translate å¼€å‘çš„ Popclip æ’ä»¶ï¼Œå“åº”é€Ÿåº¦æ˜¯æˆ‘ç”¨è¿‡çš„ç¿»è¯‘æ’ä»¶é‡Œæœ€å¿«çš„ï¼Œå¯ä»¥é€‰æ‹©ç¿»è¯‘æºï¼ˆ.com .cnï¼‰ï¼Œæœ‰å¤šç§å›½å¤–è¯­è¨€å¯ä»¥ç¿»è¯‘ï¼Œç‚¹å‡»æŒ‰é’®ååœ¨å±å¹•å³ä¸Šæ–¹æ˜¾ç¤ºè¯‘æ–‡ã€‚                    ..." />
  <meta property="og:title" content="æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘ popclip æ’ä»¶ - CaptainChen">
  <meta property="og:description" content="
æ ¹æ® Google Translate å¼€å‘çš„ Popclip æ’ä»¶ï¼Œå“åº”é€Ÿåº¦æ˜¯æˆ‘ç”¨è¿‡çš„ç¿»è¯‘æ’ä»¶é‡Œæœ€å¿«çš„ï¼Œå¯ä»¥é€‰æ‹©ç¿»è¯‘æºï¼ˆ.com .cnï¼‰ï¼Œæœ‰å¤šç§å›½å¤–è¯­è¨€å¯ä»¥ç¿»è¯‘ï¼Œç‚¹å‡»æŒ‰é’®ååœ¨å±å¹•å³ä¸Šæ–¹æ˜¾ç¤ºè¯‘æ–‡ã€‚                    ..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://wizyoung.github.io/æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘popclipæ’ä»¶/" />
  <meta property="og:image" content="https://wizyoung.github.io/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘ popclip æ’ä»¶ - CaptainChen">
  <meta name="twitter:description" content="
æ ¹æ® Google Translate å¼€å‘çš„ Popclip æ’ä»¶ï¼Œå“åº”é€Ÿåº¦æ˜¯æˆ‘ç”¨è¿‡çš„ç¿»è¯‘æ’ä»¶é‡Œæœ€å¿«çš„ï¼Œå¯ä»¥é€‰æ‹©ç¿»è¯‘æºï¼ˆ.com .cnï¼‰ï¼Œæœ‰å¤šç§å›½å¤–è¯­è¨€å¯ä»¥ç¿»è¯‘ï¼Œç‚¹å‡»æŒ‰é’®ååœ¨å±å¹•å³ä¸Šæ–¹æ˜¾ç¤ºè¯‘æ–‡ã€‚                    ...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://wizyoung.github.io/æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘popclipæ’ä»¶/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://wizyoung.github.io/media/css/prism-material-oceanic.css">
  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://wizyoung.github.io" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      CaptainChen
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          æé«˜æ•ˆç‡ç¬¬äºŒå¼¹ä¹‹è‡ªå·±å¼€å‘è°·æ­Œç¿»è¯‘ popclip æ’ä»¶
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">
            <i class="fa fa-calendar"></i>  2017-08-04
            <span style="margin-right:8px"></span>
            <i class="fa fa-clock-o"></i>  2132 words (about 9 min read)
            <!-- <span style="margin-right:8px"></span>
            <i class="fa fa-file-word-o"></i>  2132 words -->
            <span style="margin-right:8px"></span>
            <i class="fa fa-eye"></i>  <span class="date_info"><span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span> Views
</span>
          </div>
            
            <script>
              function lan(){
                if (document.getElementById("lan").innerText == "ç®€â†’ç¹"){
                  var s=document.getElementById("tongwenlet_cn");
                  if(s != null){
                  document.body.removeChild(s);
                  }
                  var s = document.createElement("script");
                  s.language = "javascript";
                  s.type = "text/javascript";
                  s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_tw.js";
                  s.id = "tongwenlet_cn";
                  document.body.appendChild(s);
                  document.getElementById("lan").innerHTML = "ç¹â†’ç°¡"
                }
                else if(document.getElementById("lan").innerText == "ç¹â†’ç°¡"){
                  var s=document.getElementById("tongwenlet_cn");
                  if(s != null){
                  document.body.removeChild(s);
                  }
                  var s = document.createElement("script");
                  s.language = "javascript";
                  s.type = "text/javascript";
                  s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_cn.js";
                  s.id = "tongwenlet_cn";
                  document.body.appendChild(s);
                  document.getElementById("lan").innerHTML = "ç®€â†’ç¹"
                  }
              }
            </script>
          <div class="text-gray-400 text-sm mr-4">
            <i class="fa fa-refresh"></i>  <a id="lan" href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“">ç®€â†’ç¹</a>
          </div>
          
            <a href="https://wizyoung.github.io/tag/81KaN8Ret/" class="text-gray-500 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              popclip
            </a>
          
            <a href="https://wizyoung.github.io/tag/VvW0sqrQr/" class="text-gray-500 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              mac
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <blockquote>
<p>æ ¹æ® Google Translate å¼€å‘çš„ Popclip æ’ä»¶ï¼Œå“åº”é€Ÿåº¦æ˜¯æˆ‘ç”¨è¿‡çš„ç¿»è¯‘æ’ä»¶é‡Œæœ€å¿«çš„ï¼Œå¯ä»¥é€‰æ‹©ç¿»è¯‘æºï¼ˆ.com .cnï¼‰ï¼Œæœ‰å¤šç§å›½å¤–è¯­è¨€å¯ä»¥ç¿»è¯‘ï¼Œç‚¹å‡»æŒ‰é’®ååœ¨å±å¹•å³ä¸Šæ–¹æ˜¾ç¤ºè¯‘æ–‡ã€‚                           â€”â€”<a href="https://www.waerfa.com/what-apps-are-frank-playing-eposide-4">MACç©å„¿æ³•</a>æŠ¥é“</p>
</blockquote>
<p>ç»§ä¸Šæ¬¡è‡ªå·±å¼€å‘ Alfred Workflow åï¼Œè¿™æ¬¡æˆ‘åˆç›¯ä¸Šäº† popclipã€‚</p>
<p>äº‹å› æ˜¯è‡ªå·±ä¸€ç›´æ¸´æœ›æœ‰ä¸€ç§å®Œç¾çš„è°·æ­Œç¿»è¯‘ä½¿ç”¨æ–¹å¼ï¼Œç›®çš„æ˜¯ç”¨é¼ æ ‡é€‰ä¸­å¾…é€‰å®šå¥å­ï¼Œç„¶åå¼¹å‡ºè°·æ­Œç¿»è¯‘å†…å®¹ã€‚æ— å¥ˆä¸€ç›´æ²¡äººåšï¼Œåªå¥½è‡ªå·±åŠ¨æ‰‹å®ç°ã€‚</p>
<!-- more -->
<h2 id="1-ä½¿ç”¨æ•ˆæœå±•ç¤º">1. ä½¿ç”¨æ•ˆæœå±•ç¤º</h2>
<p>å±•ç¤ºä¸€ä¸‹æœ€ç»ˆçš„è‡ªåˆ¶ popclip è°·æ­Œç¿»è¯‘æ’ä»¶ä½¿ç”¨æ•ˆæœ:</p>
<p>é¦–å…ˆè®¾ç½®é‡Œé¢æœ‰å‡ ä¸ªé€‰é¡¹å¯ä»¥è®¾ç½®:</p>
<figure data-type="image" tabindex="1"><img src="https://wizyoung.github.io/post-images/1581672359730.jpg#w70" alt="" loading="lazy"></figure>
<ul>
<li><code>Google Translate Site</code>: å¯é€‰ <code>translate.google.cn</code> å’Œ <code>translate.google.com</code> ä½œä¸ºç¿»è¯‘æœåŠ¡å™¨ï¼Œå‰è€…ç»™å¢™å†…çš„æœ‹å‹ä½¿ç”¨ï¼Œåè€…åˆ™æ˜¯ç»™å¢™å¤–çš„ä½¿ç”¨ã€‚</li>
<li><code>Destination Language</code> å’Œ <code>Source Language</code>: ç›®æ ‡å¤–è¯­ (destination language) å’Œæ¯è¯­ (source language)ã€‚ç¨‹åºå°†å¯¹åˆ’ä¸­çš„è¯­è¨€è¿›è¡Œæ£€æµ‹ï¼Œè‹¥æ£€æµ‹çš„è¯­è¨€éæ¯è¯­ï¼Œåˆ™ç¿»è¯‘ä¸ºæ¯è¯­ï¼›è‹¥æ£€æµ‹çš„è¯­è¨€ä¸ºæ¯è¯­ï¼Œåˆ™ç¿»è¯‘ä¸ºç›®æ ‡å¤–è¯­ã€‚</li>
</ul>
<p>ä½¿ç”¨æ•ˆæœGIFï¼š</p>
<p>è‹±è¯‘ä¸­:</p>
<figure data-type="image" tabindex="2"><img src="https://wizyoung.github.io/post-images/1581672455232.gif" alt="" loading="lazy"></figure>
<p>ä¸­è¯‘è‹±:</p>
<figure data-type="image" tabindex="3"><img src="https://wizyoung.github.io/post-images/1581672474906.gif" alt="" loading="lazy"></figure>
<p>ç¡®å®å¾ˆæ–¹ä¾¿~</p>
<h2 id="2-ä¸ºä»€ä¹ˆé€‰æ‹©popclip">2. ä¸ºä»€ä¹ˆé€‰æ‹©popclip</h2>
<p>å…¶å® Mac ä¸Šçš„ç¿»è¯‘æ–¹æ¡ˆå¾ˆå¤šï¼Œåœ¨æœ¬æ’ä»¶å‡ºæ¥ä¹‹å‰ï¼Œä¸ªäººè§‰å¾—æœ€å¥½ç”¨çš„å½“å± <a href="http://translate-tab.com">Translate Tab</a>äº†ï¼Œé¼ æ ‡é€‰ä¸­å¾…ç¿»è¯‘å­—æ®µï¼Œç‚¹å‡»å…¶ popclip å›¾æ ‡ï¼Œç„¶åé€šçŸ¥æ å¼¹å‡ºç¿»è¯‘ï¼š</p>
<figure data-type="image" tabindex="4"><img src="https://wizyoung.github.io/post-images/1581672764624.png" alt="" loading="lazy"></figure>
<p>ç„¶è€Œ Translate Tab ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼š</p>
<ul>
<li>æ”¶è´¹ (å…¶å®å°±æ˜¯ç®€å•å°è£…äº†ä¸€ä¸‹ google translate ç½‘é¡µç‰ˆï¼‰</li>
<li>é€šè¿‡ popclip é€‰æ‹©æ–‡å­—è¿™ç§è°ƒç”¨æ–¹å¼ï¼Œç¬¬ä¸€æ¬¡æ‰“å¼€å¾ˆæ…¢ï¼Œç»å¸¸è½¬äº†æ— æ•°åœˆï¼Œç»“æœæ‰ç¿»è¯‘å‡ºæ¥</li>
<li>æœåŠ¡å™¨åªèƒ½èµ° <code>translate.google.com</code>ï¼Œä¸ç¿»å¢™æ— æ³•ä½¿ç”¨ã€‚æˆ‘ç»™å¼€å‘è€…å‘é‚®ä»¶ï¼Œå¼€å‘è€…å›å¤é“ <code>Theoretically google must redirect app to the domain according to geolocation. I will check this moment</code>ï¼Œç„¶åæˆ‘å†å›å¤å°±æ²¡æœ‰åæ–‡äº†ã€‚ã€‚ã€‚å¦‚æœç”¨ Surge çš„ URL Rewrite åŠŸèƒ½è®¾ç½®<code>translate.google.com</code> è·³è½¬åˆ° <code>translate.google.cn</code>ï¼Œéœ€è¦å¼€å¯ MitMï¼Œæ¯”è¾ƒæµªè´¹æ€§èƒ½ã€‚</li>
</ul>
<p>å› ä¸ºæˆ‘éå¸¸å–œæ¬¢ popclip è¿™ç§å½¢å¼çš„å°è½¯ä»¶ï¼Œå› æ­¤å†³å®šè½¬å…¥ popclip æ’ä»¶å¼€å‘ã€‚popclip å®˜æ–¹ API æä¾›äº†ä¸€ç§ <code>show-result</code> å½¢å¼çš„ GUI æ˜¾ç¤ºæ–‡æœ¬ï¼Œç„¶è€Œæ•ˆæœå®åœ¨å¤ªæŒ«äº†ï¼šåªèƒ½åœ¨å±å¹•ä¸­åƒä¸‹é¢ä¸€æ ·æ˜¾ç¤ºä¸€é•¿æ¡ï¼Œä¸æ”¯æŒæ¢è¡Œï¼Œå¤ªé•¿äº†å°±è‡ªåŠ¨æˆªæ–­äº†ï¼Œä¹Ÿæ˜¯è®©äººå¾ˆé†‰ï¼š</p>
<figure data-type="image" tabindex="5"><img src="https://wizyoung.github.io/post-images/1581672965135.png#w90" alt="" loading="lazy"></figure>
<p>ä¸€å¼€å§‹æˆ‘ä½¿ç”¨çš„æ–¹æ¡ˆæ˜¯é‡‡ç”¨ç¬¬ä¸‰æ–¹ <a href="http://mstratman.github.io/cocoadialog/">cocoaDialog</a> åšç»“æœæ˜¾ç¤º GUIï¼Œåšäº†å³ä¸Šè§’å¼¹å‡º Bubble æˆ–è€…å±å¹•ä¸­å¤®å¼¹å‡º Msgbox çš„æ–¹å¼ã€‚ä½¿ç”¨å‡ ä¸ªç‰ˆæœ¬åè¿˜æ˜¯æŠ›å¼ƒäº† cocoaDialogï¼Œå› ä¸ºå¼¹å‡ºçš„ MsgBox 30 ç§’åè‡ªåŠ¨æ¶ˆå¤±ï¼Œå¾€å¾€ç¿»è¯‘ç»“æœè¿˜æ²¡çœ‹å®Œå°±æ¶ˆå¤±äº†ã€‚ç ”ç©¶ AppleScript æ—¶å‘ç°è‡ªå¸¦çš„ osascript æä¾›äº† dialog çš„ç»„ä»¶æ˜¾ç¤ºæ–‡æœ¬ï¼Œéå¸¸å¥½ç”¨ã€‚å°±æ˜¯ dialog è¦æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡æ–‡ä»¶å…¨ç½‘ç¼ºå°‘ç›¸å…³æ–‡æ¡£ï¼Œæ‰¾çš„æ–¹æ¡ˆåŸºæœ¬ä¸å¯è¡Œï¼Œç¡¬æ˜¯è¢«è‡ªå·±è¯•å‡ºæ¥ã€‚ã€‚ã€‚</p>
<h2 id="3-è°ƒç”¨è°·æ­Œç¿»è¯‘">3. è°ƒç”¨è°·æ­Œç¿»è¯‘</h2>
<p>å¦‚ä½•è°ƒç”¨è°·æ­Œç¿»è¯‘ï¼Œæˆ‘ç¬¬ä¸€ååº”å½“ç„¶æ˜¯çˆ¬è™«ï¼Œç„¶è€Œç”¨ Chrome åˆ° translate.google.cn æŠ“åŒ…ä¸€çœ‹ï¼š</p>
<figure data-type="image" tabindex="6"><img src="https://wizyoung.github.io/post-images/1581674609602.png#w80#h30" alt="" loading="lazy"></figure>
<p>ä¸Šå›¾ä¸­çš„ Request URL ä¸­æœ‰ä¸€ä¸ª tk å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯æ ¹æ®è¾“å…¥çš„æ–‡å­—è°ƒç”¨ JavaScript è®¡ç®—çš„ï¼Œä»£ç ç»è¿‡äº†éå¸¸å¤æ‚çš„æ··æ·†åŒ…è£…ï¼Œå‡ ä¸‡è¡Œä»£ç å°±ä¸ºäº†æ··æ·†ä¸€ä¸ª tk å€¼ï¼Œå¤ªå¯æ€•äº†ã€‚ã€‚ã€‚</p>
<p>é‚£å°±è¯•è¯•è°·æ­Œå®˜æ–¹çš„æ”¶è´¹ API å§ã€‚äºæ˜¯æˆ‘å»å¼€é€šäº† Google Cloudï¼Œç»‘å®šäº†ä¿¡ç”¨å¡ï¼Œç„¶åå‘ç°æ–°ç”¨æˆ·å±…ç„¶èµ é€ 300 ç¾é‡‘ä¼˜æƒ åˆ¸ï¼ˆé™ä¸€å¹´ç”¨å®Œï¼‰ï¼æ¿€åŠ¨ï¼å¦å¤–ï¼Œè°·æ­Œç¿»è¯‘å®˜æ–¹ API ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œç”¨è‡ªå·±çš„ API KEY ç»„åˆæˆè¿™æ ·ä¸€ä¸ª URL: <code>https://translation.googleapis.com/language/translate/v2?key=' + API_KEY</code>ï¼Œç„¶åæŠŠ <code>{'target':target_lang, 'q': query}</code> post ä¸Šå»ï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœã€‚ä¸éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œé€Ÿåº¦ä¹Ÿæ˜¯è¶…çº§å¿«ã€‚ç„¶è€Œè°·æ­Œè®¡è´¹æ–¹å¼æ˜¯æ¯ 1 M ä¸ª characters æ”¶è´¹ 20 ç¾é‡‘ï¼Œæˆ‘åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­å°±éšä¾¿å°æµ‹äº†ä¸€ä¸‹ï¼Œå±…ç„¶ç”¨äº† 3 K ä¸ª charactersï¼Œæ‰€ä»¥è¿™ä¸ª characters å’‹ç®—çš„ï¼Œå­—æ¯æ•°ä¹ˆã€‚ã€‚ã€‚è¦æ˜¯åˆ†äº«å‡ºå»ç”¨çš„äººå¤šäº†ï¼Œç”¨ä¸äº†å‡ å¤© 300 ç¾é‡‘å°±èŠ±å…‰äº†ã€‚</p>
<p>ç„¶åæˆ‘åˆå»æœç´¢ï¼Œæœ‰æ²¡æœ‰å…è´¹çš„è°·æ­Œç¿»è¯‘ APIï¼Œæœç„¶åœ¨çŸ¥ä¹æ‰¾åˆ°äº†: <a href="https://www.zhihu.com/question/47239748?sort=created">è¯·é—®å¦‚ä½•è°ƒç”¨è°·æ­Œç¿»è¯‘API?</a>ã€‚ç”¨ <code>http://translate.google.cn/translate_a/single?client=gtx&amp;amp;amp;amp;sl=en&amp;tl=zh-CN&amp;dt=t&amp;q=query</code> çš„å½¢å¼å»æŸ¥è¯¢å°±å¯ä»¥å…è´¹è°ƒç”¨è°·æ­Œç¿»è¯‘ã€‚éš¾é“æ˜¯æ¼ç½‘ä¹‹é±¼ï¼Ÿä¸ä¸€ä¼šæˆ‘å°±å‘ç°ï¼Œwocï¼ŒåŒä¸€ IP ä¸‹è°ƒç”¨æ­¤ API å¤šæ¬¡å°±ç›´æ¥è¢« Google ç»™ ban äº†ï¼å¿ƒæœºä½  Googleï¼</p>
<p>å¥½åœ¨ GitHub å¤§ç¥å¤šï¼Œä¸€é€šæœç´¢ï¼Œæœ‰äººé€†å‘äº†è°·æ­Œçš„ tkï¼Œè¿˜å°è£…å¥½äº†ğŸ˜…: <a href="https://github.com/ssut/py-googletrans">py-googletrans</a>ã€‚å¥½äº†ï¼Œæ—¢ç„¶æœ‰ç°æˆçš„è½®å­äº†ï¼Œæˆ‘å°±ç›´æ¥ç”¨äº†~</p>
<h2 id="4-popclip-æ’ä»¶çš„ç¼–å†™">4. popclip æ’ä»¶çš„ç¼–å†™</h2>
<p>è™½è¯´ç¬¬ä¸€æ¬¡æ¥è§¦ popclip æ’ä»¶çš„ç¼–å†™ï¼Œå°è¯•ä¸€ä¸‹ï¼Œå‘ç°è¿˜æ˜¯è›®ç®€å•çš„ã€‚å†™èµ·æ¥æ¯” Alfred Workflow ç®€å•ä¸å°‘ï¼Œç„¶è€Œæ²¡æ³•è°ƒè¯•ï¼Œç•¥è›‹ç–¼ã€‚å…¨ç¨‹ä¸»è¦å‚è€ƒäº†å°‘æ•°æ´¾ <a href="https://sspai.com/post/26154">è®©å‰ªåˆ‡æ¿åœ¨ OS X ä¸Šé£èµ·æ¥ï¼šPopClip æ’ä»¶ç¼–å†™æ•™ç¨‹</a> å’Œ popclip å®˜æ–¹ <a href="https://github.com/pilotmoon/PopClip-Extensions">github documentation</a>ã€‚</p>
<p>ä¸€ä¸ª popclip æ’ä»¶ï¼Œä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†:</p>
<ul>
<li>Config.plist: å±æ€§åˆ—è¡¨æ–‡ä»¶ã€‚å…¶å®ç±»ä¼¼äº Python çš„å­—å…¸ï¼Œä¸»è¦æ˜¯ç”¨ key-value çš„å½¢å¼ï¼Œè®¾ç½®å˜é‡ã€‚è¿™é‡Œé¢æœ€é‡è¦çš„ä¸¤ä¸ªä¸» key å°±æ˜¯ Actions å’Œ Optionsã€‚Actions å†³å®šäº†å¯¹é¼ æ ‡é€‰ä¸­çš„æ–‡å­—å¦‚ä½•å»ä¼ å‚å’Œå¤„ç†ï¼Œå¦‚ä½•å»è°ƒç”¨ Shell Script æˆ– Apple Script æ¥æ‰§è¡Œä½ æƒ³è¦çš„åŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•è¾“å‡ºã€‚Options åˆ™æ˜¯å¤„ç†è®¾å®šæ¡†ä¸­çš„é€‰é¡¹ï¼Œæ˜¯å‹¾é€‰æ¡†è¿˜æ˜¯å¤šé€‰æ ã€‚å…·ä½“çš„ç»†èŠ‚å®˜æ–¹æ–‡æ¡£ä¸€çœ‹å°±æ‡‚ã€‚ä¸‹å›¾æ˜¯æœ¬æ’ä»¶ Config.plist çš„ä¸€éƒ¨åˆ†æˆªå›¾:</li>
</ul>
<figure data-type="image" tabindex="7"><img src="https://wizyoung.github.io/post-images/1581676180458.jpg#s70" alt="" loading="lazy"></figure>
<ul>
<li>
<p>Icon.png: å›¾æ ‡æ–‡ä»¶ã€‚è¿™ä¹ˆå¥½çš„åŠŸèƒ½å½“ç„¶è¦æœ‰ä¸ªå¡å“‡ä¼Šçš„å›¾æ ‡å•¦ã€‚</p>
</li>
<li>
<p>Script: è„šæœ¬æ–‡ä»¶ã€‚æ‰§è¡Œç›®æ ‡åŠŸèƒ½ã€‚popclip é»˜è®¤åªæ”¯æŒ Shell Script å’Œ Apple Scriptã€‚è¦ç”¨å…¶ä»–è¯­è¨€ï¼Œä¹Ÿåªèƒ½é€šè¿‡è¿™ä¸¤ç§ Script æ¥è°ƒç”¨ã€‚</p>
</li>
</ul>
<p>å…¶å®ï¼Œæœ€ç»ˆå®ç°è°·æ­Œç¿»è¯‘çš„ Python è„šæœ¬å¾ˆç®€å•ï¼Œä¸€å…±æ‰ 60 ä½™è¡Œä»£ç ï¼Œå’Œä¸Šæ¬¡é‚£ä¸ªä¼˜è¶ŠåŠ é€Ÿ Alfred Workflow å‡ ç™¾è¡Œç›¸æ¯”ç®€å•å¤ªå¤šï¼Œé€»è¾‘ä¸Šä¹Ÿæ›´ç®€å•ã€‚</p>
<p>é¦–å…ˆæˆ‘çš„ <code>translate.py</code> é€šè¿‡ <code>argparse</code> æ¥å—ä»¥ä¸‹å‡ ä¸ªå‚æ•°:</p>
<pre><code class="language-python">--site site_arg --srclang srclang_arg --destlang destlang_arg
</code></pre>
<p>ç„¶åé€šè¿‡ <code>go.sh</code> æ¥æ‰§è¡Œæ­¤ py æ–‡ä»¶ï¼š</p>
<pre><code class="language-shell">/usr/bin/python translate.py --site $POPCLIP_OPTION_SITE  --destlang $POPCLIP_OPTION_DESTLANG --srclang $POPCLIP_OPTION_SRCLANG $POPCLIP_URLENCODED_TEXT &amp;
</code></pre>
<p>ä¸Šé¢çš„ <code>$POPCLIP_XXX</code> æ˜¯ popclip ä¼ é€’æ¥çš„å˜é‡ã€‚ä»¥ <code>--site</code> ä¸ºä¾‹ï¼Œåœ¨ä¸Šé¢æåˆ°çš„ Config.plistæ–‡ä»¶çš„ Options ä¸­ï¼Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªæ ‡é¢˜ä¸º <code>Google Translate Site</code> çš„å¤šé€‰æ ï¼Œè®¾å®šä¸€ä¸ªå˜é‡ï¼Œå…¶ <code>key</code> è®¾å®šä¸º <code>site</code>ï¼Œ<code>value</code> è®¾å®šä¸º <code>translate.google.cn</code> æˆ– <code>translate.google.com</code> (éƒ½æ˜¯å­—ç¬¦ä¸²)ï¼Œé ç”¨æˆ·æ¥é€‰æ‹©ä½¿ç”¨å“ªä¸ª valueã€‚ç„¶åé€‰å®šçš„ value ä»¥åä¸º <code>$POPCLIP_OPTION_SITE</code> çš„å˜é‡å­˜åœ¨äºæ•´ä¸ªæ’ä»¶è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¯éšæ—¶è°ƒç”¨ã€‚åŒæ ·çš„ï¼Œ<code>$POPCLIP_OPTION_LANG</code> ä»£è¡¨ <code>Target Foreign Language</code> é‚£ä¸€æ çš„å˜é‡çš„ valueï¼Œè¿™é‡Œçš„è¯¦ç»†è®¾ç½®å‚è§æˆ‘çš„ <a href="https://github.com/wizyoung/googletranslate.popclipext/blob/master/src/Config.plist">Config.plist</a>ã€‚</p>
<p>ç„¶åæœ‰å¿…è¦äº¤ä»£ä¸€ä¸‹æœ€åé‚£ä¸ª <code>$POPCLIP_URLENCODED_TEXT</code>ã€‚å¦‚ä½•å»æŠŠé¼ æ ‡é€‰ä¸­çš„æ–‡å­—è½¬æ¢æˆä¸€ä¸ªå˜é‡ï¼Œä¼ é€’ç»™è„šæœ¬å‘¢ã€‚</p>
<p>èµ·åˆï¼Œæˆ‘æ˜¯åœ¨ Config.plist ä¸­çš„ Actions ä¸­æ˜¯è¿™ä¹ˆè®¾å®šçš„:</p>
<pre><code class="language-shell">&lt;key&gt;Before&lt;/key&gt;
&lt;string&gt;copy&lt;/string&gt;
</code></pre>
<p>ç„¶åç”¨çš„å˜é‡åä¸º <code>$POPCLIP_TEXT</code>ã€‚Before æŒ‡çš„æ˜¯åœ¨ popclip æ‰§è¡Œä¸»è¦ action ä¹‹å‰è¦å¹²çš„äº‹ï¼Œè¿™é‡Œæˆ‘è®¾å®šä¸º <code>copy</code>ã€‚è¿™æ ·ï¼Œåªè¦é¼ æ ‡é€‰ä¸­ä¸€æ®µæ–‡å­—ï¼Œå°†è‡ªåŠ¨æ‰§è¡Œ <code>Command + C</code>ï¼ŒåŒæ—¶ä»¥ string çš„å½¢å¼ä¿å­˜ä¸ºä¸€ä¸ªåå« <code>$POPCLIP_TEXT</code> çš„å˜é‡ã€‚è¿™æ ·çš„å¼Šç«¯ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯æ¬¡é¼ æ ‡åˆ’è¯éƒ½å¤åˆ¶æ–‡å­—åˆ°å‰ªåˆ‡æ¿ï¼Œä¼šæ‰°ä¹±å‰ªåˆ‡æ¿ã€‚å› æ­¤æˆ‘æ”¹ç”¨:</p>
<pre><code class="language-shell">&lt;key&gt;Requirements&lt;/key&gt;
&lt;string&gt;copy&lt;/string&gt;
</code></pre>
<p>æ ¹æ®å®˜æ–¹è¯´æ˜ï¼Œè¿™ç§æƒ…å†µä¸‹çš„ <code>copy</code> å°±ä¸ä¼šå¤åˆ¶æ–‡å­—åˆ°å‰ªåˆ‡æ¿äº†ã€‚å¦å¤–ä¹‹æ‰€ä»¥ç”¨ <code>$POPCLIP_URLENCODED_TEXT</code>ï¼Œæ˜¯å› ä¸ºå‘çˆ¹çš„ <code>$POPCLIP_TEXT</code>ï¼Œåœ¨é‡åˆ°ç©ºæ ¼æ—¶å°±ä¼šåœæ­¢å¤åˆ¶ï¼Œæ¯”å¦‚é¼ æ ‡é€‰ä¸­äº† <code>a b c</code>ï¼Œå…¶å®å˜é‡åªå­˜äº† <code>a</code>ã€‚æ‰€ä»¥åªå¥½ç”¨ url-encoded çš„å½¢å¼ï¼Œæœ€åå†ç”¨ urllib åº“çš„ unquote è½¬æ¢ä¸ºæ­£å¸¸çš„ Stringã€‚</p>
<p>æœ€åï¼Œæ•´ä½“æµç¨‹æ¡†å›¾å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="8"><img src="https://wizyoung.github.io/post-images/1581676446096.png#w90#h30" alt="" loading="lazy"></figure>
<p>æ•´ä½“ä¸‹æ¥æ€è·¯è¿˜æ˜¯æŒºæ¸…æ™°çš„ã€‚ç„¶ååªéœ€è¦æŠŠä»¥ä¸Šæ‰€æœ‰æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¼ºè¡ŒåŠ ä¸Šä¸€ä¸ª <code>.popclipext</code> å°±å¤§åŠŸå‘Šæˆå•¦~</p>
<h2 id="5-ä»£ç ä¸ä¸‹è½½">5. ä»£ç ä¸ä¸‹è½½</h2>
<p>è™½ç„¶ä»£ç å¾ˆç®€å•ï¼Œå¼€æºåˆ° GitHub äº†ï¼Œæ–¹ä¾¿ä¸€ä¸‹å…¶ä»–äººå‚è€ƒç¼–å†™ popclip å§~</p>
<p><mark><a href="https://github.com/wizyoung/googletranslate.popclipext">Github Repo</a></mark></p>

        </div>
        <!-- Google ads here -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
             style="display:block; text-align:center;"
             data-ad-layout="in-article"
             data-ad-format="fluid"
             data-ad-client="ca-pub-6170107338287342"
             data-ad-slot="4538328192"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        <!-- Share to Twitter, Weibo, Telegram -->
       <!--  <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div> -->
        <br>
        <hr>
        <br>
        <div class="sharethis-inline-share-buttons"></div>
        <div style="color: #ccc;font-size:12px;"><i class="fa fa-user"></i> æœ¬æ–‡ç”±<a rel="license" href="/"> CaptainChen </a>åˆ›ä½œ</div>
        <div style="color: #ccc;font-size:12px;"><i class="fa fa-cc"></i> è¯¥æ–‡ç« é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/"> çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</div>
      </div>

      <!--  -->
<!-- 
       -->

      <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMDUwMS83MDU1">
      <script type="text/javascript">
         (function(d, s) {
             var j, e = d.getElementsByTagName(s)[0];

             if (typeof LivereTower === 'function') { return; }

             j = d.createElement(s);
             j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
             j.async = true;

             e.parentNode.insertBefore(j, e);
         })(document, 'script');
      </script>
      <noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
      </div>
      <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->

      <footer class="py-12 text-center px-3 md:px-0" v-pre>
  CopyRight Â© 2017 - 2020
	<br>
	æœ¬ç«™å·²ç¨³å®šè¿è¡Œ
	<strong><script type="text/javascript">
	var urodz= new Date("01/16/2017");
	var now = new Date();
	var ile = now.getTime() - urodz.getTime();
	var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
	document.write(+dni)
	</script>
	</strong>å¤© æ€»è®¿é—®é‡ <strong><span id="busuanzi_value_site_uv"></span></strong> æ¬¡

</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA">1. ä½¿ç”¨æ•ˆæœå±•ç¤º</a></li>
<li><a href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9popclip">2. ä¸ºä»€ä¹ˆé€‰æ‹©popclip</a></li>
<li><a href="#3-%E8%B0%83%E7%94%A8%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91">3. è°ƒç”¨è°·æ­Œç¿»è¯‘</a></li>
<li><a href="#4-popclip-%E6%8F%92%E4%BB%B6%E7%9A%84%E7%BC%96%E5%86%99">4. popclip æ’ä»¶çš„ç¼–å†™</a></li>
<li><a href="#5-%E4%BB%A3%E7%A0%81%E4%B8%8E%E4%B8%8B%E8%BD%BD">5. ä»£ç ä¸ä¸‹è½½</a></li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://wizyoung.github.io/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://wizyoung.github.io/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //æ‹¿åˆ°é¢„è§ˆæ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„htmlä»£ç 
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //å®šä¹‰å›¾ç‰‡æ•°ç»„å˜é‡
    var imgitems;
    /**
    * ç”¨äºæ˜¾ç¤ºé¢„è§ˆç•Œé¢
    * @param index å›¾ç‰‡æ•°ç»„ä¸‹æ ‡
    */
    function viewImg(index) {
      //å…¶å®ƒé€‰é¡¹è¿™é‡Œä¸åšè¿‡å¤šé˜è¿°ï¼Œè¯¦æƒ…è§å®˜ç½‘
      var pswpoptions = {
        index: parseInt(index, 10), // å¼€å§‹å¹»ç¯ç‰‡ç´¢å¼•ã€‚0æ˜¯ç¬¬ä¸€å¼ å¹»ç¯ç‰‡ã€‚å¿…é¡»æ˜¯æ•´æ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚
        bgOpacity: 0.7, // èƒŒæ™¯é€æ˜åº¦ï¼Œ0-1
        maxSpreadZoom: 3, // ç¼©æ”¾çº§åˆ«ï¼Œä¸è¦å¤ªå¤§
      };
      //åˆå§‹åŒ–å¹¶æ‰“å¼€PhotoSwipeï¼ŒpswpElementå¯¹åº”ä¸Šé¢é¢„è§ˆæ¡†æ¶ï¼ŒPhotoSwipeUI_Defaultä¸ºçš®è‚¤ï¼Œimgitemsä¸ºå›¾ç‰‡æ•°ç»„ï¼Œpswpoptionsä¸ºé€‰é¡¹
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * ç”¨äºæ·»åŠ å›¾ç‰‡ç‚¹å‡»äº‹ä»¶
    * @param img å›¾ç‰‡å…ƒç´ 
    * @param index æ‰€å±ä¸‹æ ‡ï¼ˆåœ¨imgitemsä¸­çš„ä½ç½®ï¼‰
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * è½®è¯¢æ‰€æœ‰å›¾ç‰‡ï¼Œè·å–srcã€widthã€heightç­‰æ•°æ®ï¼ŒåŠ å…¥imgitemsï¼Œå¹¶ç»™å›¾ç‰‡å…ƒç´ æ·»åŠ äº‹ä»¶
    * æœ€å¥½åœ¨onloadä¸­æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œæœ¬ç«™å› æ”¾åœ¨æœ€åº•éƒ¨ï¼Œæ‰€ä»¥ç›´æ¥åˆå§‹åŒ–
    * å¼‚æ­¥åŠ è½½å›¾ç‰‡å¯åœ¨å›¾ç‰‡å…ƒç´ åˆ›å»ºå®Œæˆåè°ƒç”¨æ­¤æ–¹æ³•
    */
    function initImg() {
      //é‡ç½®å›¾ç‰‡æ•°ç»„
      imgitems = [];
      //æŸ¥æ‰¾class:markdown ä¸‹çš„æ‰€æœ‰imgå…ƒç´ å¹¶éå†
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //æœ¬ç«™ç›¸å†Œåˆå§‹ä¸ºloadingå›¾ç‰‡ï¼ŒçœŸå®å›¾ç‰‡æ”¾åœ¨data-src
        var ds = img.getAttribute("data-src");
        //åˆ›å»ºimageå¯¹è±¡ï¼Œç”¨äºè·å–å›¾ç‰‡å®½é«˜
        var imgtemp = new Image();
        //åˆ¤æ–­æ˜¯å¦å­˜åœ¨data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼“å­˜
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('è¿›æ¥äº†2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //ä¸è¦ä½¿ç”¨pushï¼Œå› ä¸ºonloadå‰åé¡ºåºä¼šä¸åŒ
            imgitems[this.index] = imgobj
            //æ·»åŠ ç‚¹å‡»äº‹ä»¶
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //åˆå§‹åŒ–
    initImg();
  </script>
</body>

</html>